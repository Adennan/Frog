---


---

<h1 id="compiler">Compiler</h1>
<p>编译器是将便于编写和维护的高级程序语言转换为计算机可识别和运行的低级机器语言。编译器是将源语言程序作为输入，将其翻译成使用目标语言的执行程序。<br>
现代编译器的工作流程：<br>
源程序source code → 预处理器preprocessor → 编译器compiler → 汇编程序assembler → 目标程序object code → 链接器Linker → 可执行程序executables<br>
编译器的各工作阶段：<br>
<strong>词法分析 Lexical Analyzer</strong><br>
词法分析是将源语言程序作为输入，根据其词法规则输出为一系列的词法单元/单词记号流。词法单元中常见的token有关键字、标识符、分隔符、操作符、NUMBER和常量等。<br>
<strong>语法分析 Parsing</strong><br>
语法分析是将词法单元/单词记号流作为输入，输出为一颗语法树以及判断当前程序是否符合当前语言的文法规则。此处先要为源语言构建上下文无关语法规则。<br>
<strong>语义分析 Semantic Analyzer</strong><br>
语义分析是将语法分析阶段生成的语法树做一定程度的简化，或许你可以理解为剪枝的过程。这是在对语法树抽象为抽象语法树，并且进行静态语义检查，比如说类型检查。目的是保证符合语法的结构在一定程度上也是符合此语言的语义规则的。<br>
<strong>中间优化 Intermediate Optimizer</strong><br>
优化在现代编译器中是极其重要的一部分。由于编译器在编译的过程中是固定的模式，不可避免的会使中间代码有时间和空间上的资源浪费。所以对IR的多次优化可以生成高效率的中间代码输入到代码生成阶段。<br>
<strong>代码生成 Code Generator</strong><br>
代码生成阶段是编译器的最后一个阶段，在此阶段需要考虑计算机的系统结构、指令系统及寄存器分配的问题。</p>
<p>除了以上我们还需要考虑错误处理的问题：源语言程序中不可避免的会出现静态或动态的错误。静态错误可以理解为类型错误、命名冲突等，而动态错误是有数组越界或者说变量取值为零时作为除数等。对于不同的错误，要能够返回出不同的错误和提示信息。</p>

